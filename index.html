<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>After School Classes</title>
        <script src="https://unpkg.com/vue"></script>
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <div id="app">
            <div class="main-nav">
                <button class="checkout">Checkout</button>
            </div>

            <main>
                <div class="lesson">
                    <div class="holder">
                        <div class="card-image" v-bind:style="{ 'background-image': 'url(' + lesson.image + ')' }"></div>
                        <div class="card-info">
                            <div class="card-subject">{{ lesson.subject }}</div>
                            <div class="card-spaces">Spaces left: {{ lesson.availableSpaces }}</div>
                            <div class="card-location">{{ lesson.location }}</div>
                            <div class="card-price">Â£{{ convertedPrice }}</div>
                            <button class="addToCart" v-on:click="addToCart" :disabled="isAvailable">Add to cart</button>
                        </div>   
                    </div>
                </div>
            </main>
        </div>
        <script>

            let app = new Vue({
                el: '#app',
                data: {
                    cart: [],
                    sitename: 'After school classes',
                    lesson: {
                        id: 1,
                        subject: 'Music',
                        location: 'London',
                        image: 'image\music.jpg',
                        price: 2050,
                        availableSpaces: 5
                    }
                },
                methods: {
                    addToCart() {
                        let spaces = this.lesson.availableSpaces;
    
                        if(spaces <= 0) {
                            alert("No available spaces");
                        } else {
                            this.cart.push(this.lesson.id);
                            this.lesson.availableSpaces--;
                        }
                    }
                },
                computed: {
                    isAvailable() {
                        return (this.lesson.availableSpaces > 0) ? false : true;
                    },
                    convertedPrice() {
                        return (this.lesson.price/100).toFixed(2);
                    }
                }
            });
    
        </script>
    </body>
</html>